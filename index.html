<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VSPhone Interactive Dashboard</title>
<script src="https://unpkg.com/armcloud-rtc/dist/armcloud.min.js"></script>
<style>
  body { font-family: Arial; margin: 2rem; }
  #phoneView { width: 360px; height: 640px; border: 1px solid #ccc; margin-top: 1rem; }
  input, button { padding: 0.4rem; margin: 0.3rem 0; }
</style>
</head>
<body>
<h1>VSPhone Interactive Dashboard</h1>

<label>Enter Phone ID (padId):</label><br>
<input type="text" id="phoneIdInput" placeholder="Phone ID">
<button id="connectBtn">Connect Phone</button>

<div id="phoneView"></div>

<script>
document.getElementById("connectBtn").addEventListener("click", async () => {
    const phoneId = document.getElementById("phoneIdInput").value.trim();
    if (!phoneId) return alert("Enter phone ID");

    // Request SDK token from backend
    const res = await fetch("/api/getToken", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ phoneId })
    });
    const data = await res.json();
    if (!data.token) return alert("Failed to get SDK token");

    // Initialize Web SDK
    const engine = new ArmcloudEngine({
        baseUrl: "https://openapi-hk.armcloud.net", // Use correct SDK server
        token: data.token,
        viewId: "phoneView"
    });

    engine.start(); // Connect and display the phone

    // Optionally, you can add keyboard/mouse input events here
});
</script>
</body>
</html>
